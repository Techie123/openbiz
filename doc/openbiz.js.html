<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: openbiz.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: openbiz.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * @module openbiz
 * @author Jixian Wang &lt;jixian@openbiz.me>
 * @author Rocky Swen &lt;rocky@openbiz.me>
 * @version 3.0.0
 * @copyright {@link http://www.openbiz.me|Openbiz LLC}
 * @license {@link http://opensource.org/licenses/BSD-3-Clause|BSD License}
 */
"use strict";
var path=require('path');
/**
 * Loads and inits the Openbiz system into global scope and assign an instance of
 * expressjs app as the context of openbiz.
 * @param {express} app - An instance of express app
 * @returns {!openbiz} Openbiz system environment
 */
module.exports = function(app)
{
    if (typeof openbiz != "undefined") return openbiz;
    
	console.log('init openbiz system ...');
    /**
     * @namespace openbiz
     * @author Jixian Wang &lt;jixian@openbiz.me>
     * @version 3.0.0
     * @copyright {@link http://www.openbiz.me|Openbiz LLC}
     * @license {@link http://opensource.org/licenses/BSD-3-Clause|BSD License}
     */
    var openbiz =
	{
		apps: {},
		appRoot: path.dirname(__dirname),
        /**
         * A context reference for express app.
         * Just in case of if need to access express's method
         * @memberof openbiz
         * @type {express}
         * @example
         * //below sample shows how to access some express app's setting
         * //lets say we have setup some setting in express app
         * app.set('project-name', "My greate openbiz powered project! ");
         * //init openbiz system
         * var openbiz = require('openbiz')(app);
         *
         * ...
         *
         * in some other files if you want to access it
         * var projectName = openbiz.context.get('project-name');
         */
		context: app,
        /**
         * Namespace of Openbiz loader classes
         * @namespace openbiz.loaders */
		loaders:
		{			
			ModuleLoader: 	 require("./loaders/ModuleLoader"),
			PolicyLoader:    require("./loaders/PolicyLoader"),
			RouteLoader: 	 require("./loaders/RouteLoader"),
			RoleLoader: 	 require("./loaders/RoleLoader"),
			AppLoader: 		 require("./loaders/AppLoader")
		},
        /**
         * Namespace of Openbiz base object classes
         * @namespace openbiz.objects */
		objects:
		{
			Application: 	 require("./objects/Application"),
			Module: 	 	 require("./objects/Module"),
			Controller:  	 require("./objects/Controller"),
			Object: 	 	 require("./objects/Object")
		},
        /**
         * Namespace of Openbiz ready to use controller classes
         * @namespace openbiz.controllers */
		controllers:
		{
			ModelController: require("./controllers/ModelController")
		},
        /**
         * Namespace of Openbiz ready to use route middle-ware policy classes
         * @namespace openbiz.policies */
		policies:
		{
			ensurePermission: require("./policies/ensurePermission")
		},
        /**
         * Namespace of Openbiz ready to use router classes
         * @namespace openbiz.routers */
        routers:
        {
            ModelRouter:     require("./routers/ModelRouter")
        },
        /**
         * This is an alias of {@link openbiz.services.ObjectService.getModel}
         * @memberof openbiz
         * @method
         * @see {@link openbiz.services.ObjectService.getModel}
         */
		getModel: 			 require("./services/ObjectService").getModel,

        /**
         * This is an alias of {@link openbiz.services.ObjectService.getController}
         * @memberof openbiz
         * @method
         * @see {@link openbiz.services.ObjectService.getController}
         */
		getController: 		 require("./services/ObjectService").getController,


        /**
         * This is an alias of {@link openbiz.services.ObjectService.getPolicy}
         * @memberof openbiz
         * @method
         * @see {@link openbiz.services.ObjectService.getPolicy}
         */
		getPolicy: 			 require("./services/ObjectService").getPolicy,


        /**
         * This is an alias of {@link openbiz.services.ObjectService.getRole}
         * @memberof openbiz
         * @method
         * @see {@link openbiz.services.ObjectService.getRole}
         */
		getRole: 			 require("./services/ObjectService").getRole
	};

    global.openbiz = openbiz;
	//setup methods alias
    /**
     * This is an alias of {@link openbiz.loaders.AppLoader}
     * @memberof openbiz
     * @method
     * @see {@link openbiz.loaders.AppLoader}
     */
    openbiz.loadAppToRoute 	= openbiz.loaders.AppLoader;

    /**
     * This is an alias of {@link openbiz.policies.ensurePermission}
     * @method
     * @memberof openbiz
     * @see {@link openbiz.policies.ensurePermission}
     */
	openbiz.ensurePermission = openbiz.policies.ensurePermission;

	//setup classes alias
    /**
     * This is an alias of {@link openbiz.objects.Object}
     * @memberof openbiz
     * @see {@link openbiz.objects.Object}
     */
	openbiz.Object 			= openbiz.objects.Object;

    /**
     * This is an alias of {@link openbiz.objects.Application}
     * @memberof openbiz
     * @see {@link openbiz.objects.Application}
     */
	openbiz.Application 	= openbiz.objects.Application;

    /**
     * This is an alias of {@link openbiz.objects.Module}
     * @memberof openbiz
     * @see {@link openbiz.objects.Module}
     */
	openbiz.Module 			= openbiz.objects.Module;

    /**
     * This is an alias of {@link openbiz.objects.Controller}
     * @memberof openbiz
     * @see {@link openbiz.objects.Controller}
     */
	openbiz.Controller		= openbiz.objects.Controller;

    /**
     * This is an alias of {@link openbiz.controllers.ModelController}
     * @memberof openbiz
     * @see {@link openbiz.controllers.ModelController}
     */
    openbiz.ModelController = openbiz.controllers.ModelController;

	return global.openbiz;
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-openbiz.html">openbiz</a></li></ul><h3>Classes</h3><ul><li><a href="openbiz.objects.Application.html">Application</a></li><li><a href="openbiz.objects.Controller.html">Controller</a></li><li><a href="openbiz.objects.Module.html">Module</a></li><li><a href="openbiz.objects.Object.html">Object</a></li><li><a href="openbiz.routers.ModelRouter.html">ModelRouter</a></li><li><a href="openbiz.services.ObjectService.html">ObjectService</a></li></ul><h3>Namespaces</h3><ul><li><a href="openbiz.html">openbiz</a></li><li><a href="openbiz.controllers.html">controllers</a></li><li><a href="openbiz.loaders.html">loaders</a></li><li><a href="openbiz.objects.html">objects</a></li><li><a href="openbiz.policies.html">policies</a></li><li><a href="openbiz.routers.html">routers</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0</a> on Sun Dec 22 2013 15:25:42 GMT+0700 (ICT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
